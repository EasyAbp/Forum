@page "~/Forum/Community/{name}"
@using Microsoft.Extensions.Localization
@using EasyAbp.Forum.Localization
@model EasyAbp.Forum.Web.Pages.Forum.Community.IndexModel
@inject IStringLocalizer<ForumResource> L
@{
  var colors = new List<string>
  {
    "#007bff", "#e83e8c", "#6f42c1"
  };
}

@section styles
{
    <abp-style src="/Pages/Forum/Community/index.css"/>
}

<div class="container">
  <div class="jumbotron p-4 p-md-5 text-white rounded bg-dark">
    <div class="col-md-6 px-0">
      <h1 class="display-6 font-italic">@Model.Community.DisplayName</h1>
      <p class="lead my-3">@Model.Community.Description</p>
    </div>
  </div>

  <div class="row mb-2">
    @foreach (var post in Model.PinnedPosts)
    {
      <div class="col-md-6">
        <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
          <div class="col p-4 d-flex flex-column position-static">
            <strong class="d-inline-block mb-2 text-primary">@L["PinnedPost"]</strong>
            <h3 class="mb-0">@post.Title</h3>
            <div class="mb-1 text-muted">@L.GetString("PostedBy", post.Id.ToString()) <time class="timeago" datetime="@post.CreationTime">@post.CreationTime</time></div>
            <p class="card-text mb-auto">@post.Outline</p>
            <a href="~/Forum/Post/@post.Id" class="stretched-link">Continue reading</a>
          </div>
          <div class="col-auto d-none d-lg-block">
            <svg class="post-thumbnail" width="200" height="250" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
              <rect width="100%" height="100%" fill="#55595c"/>
              <image class="post-thumbnail-img" href="/EasyAbp/Forum/images/post-thumbnail-placeholder.png" height="100" width="100" x="-20" y="100"></image>
            </svg>
          </div>
        </div>
      </div>
    }
  </div>
</div>

<div class="container">
  <div class="my-3 p-3 bg-white rounded shadow-sm">
    <h6 class="border-bottom border-gray pb-2 mb-0">@Model.Community.DisplayName</h6>
    @foreach (var (post, i) in Model.Posts.Select((post, i) => ( post, i )))
    {
      var color = colors[i % colors.Count];
      <div class="media text-muted pt-3">
        <svg class="bd-placeholder-img mr-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="@color"/></svg>

        <div class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
          <div class="d-flex justify-content-between align-items-center w-100">
            <a class="post-title" href="~/Forum/Post/@post.Id"><strong class="text-gray-dark">@post.Title</strong></a>
          </div>
          <span class="d-block">@post.Outline</span>
        </div>
      </div>
    }
  </div>
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-end">
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
      </li>
      <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item">
        <a class="page-link" href="#">Next</a>
      </li>
    </ul>
  </nav>
</div>